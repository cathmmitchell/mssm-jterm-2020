devtools
library(devtools)
build_github_devtools()
install.packages("devtools")
switch?
\
?switch
install.packages("netcdf4")
install.packages("ncdf4")
buoylookup <- function(buoyname='A01',baseIRL='http://www.neracoos.org/thredds/dodsC/UMO/DSG/SOS'){switch(buoyname[1],'A01'=file.path(baseURL,'A01/CTD1m/HistoricRealtime'))}
baseurl <- buoylookup()
buoylookup <- function(buoyname='A01',baseURL='http://www.neracoos.org/thredds/dodsC/UMO/DSG/SOS'){switch(buoyname[1],'A01'=file.path(baseURL,'A01/CTD1m/HistoricRealtime'))}
baseurl <- buoylookup()
NC <- ncdf::nc_open(baseurl)
NC <- ncdf4::nc_open(baseurl)
dates <- NC$dim$time$vals + as.POSIXct('1858-11-17 00:00:00',format='%Y-%m-%d %H:%M:%S',tz='UTC')
dates
dates <- NC$dim$time$vals/864000 + as.POSIXct('1858-11-17 00:00:00',format='%Y-%m-%d %H:%M:%S',tz='UTC')
dates
dates <- NC$dim$time$vals864000 + as.POSIXct('1858-11-17 00:00:00',format='%Y-%m-%d %H:%M:%S',tz='UTC')
dates <- NC$dim$time$vals*864000 + as.POSIXct('1858-11-17 00:00:00',format='%Y-%m-%d %H:%M:%S',tz='UTC')
dates
dates <- NC$dim$time$vals*86400 + as.POSIXct('1858-11-17 00:00:00',format='%Y-%m-%d %H:%M:%S',tz='UTC')
dates
tail(dates)
daterange <- as.POSIXct(c("2018-01-01","2018-01-10"))
idx <- findInterval(dates,daterange)
daterange <- as.POSIXct(c("2018-01-01","2018-01-10"),tz='UTC')
idx <- findInterval(dates,daterange)
idx
table(idx)
dates[idx=1]
dates[idx==1]
NC
len <- sapply(NC$var, '[[','size')
len
len[len==length(idx)]
len <- len[len==length(idx)]
len
strt <- which(idx==1)[1]
idxstart <- which(idx==1)[1]
idxlength <- sum(idx==1)
idxlength
XX <- sapply(names(len), function(nm){ncdf4::ncvar_get(NC,varid=nm,start=idxstart,count=idxlength)},simplify=FALSE)
sapply(names(len), ncdf4::ncvar_get(NC,varid='temperature',start=idxstart,count=idxlength),simplify=FALSE)
ncdf4::ncvar_get(NC,varid='temperature',start=idxstart,count=idxlength)
ncdf4::ncvar_get(NC,varid='temperature')
ncdf4::ncvar_get(NC,'temperature')
buoylookup <- function(buoyname='A01',baseURL='http://www.neracoos.org/thredds/dodsC/UMO/DSG/SOS'){switch(buoyname[1],'B01'=file.path(baseURL,'B01/CTD20m/HistoricRealtime'))}
baseurl <- buoylookup()
NC <- ncdf4::nc_open(baseurl)
sessionInfo()
library(thredds)
library(ncdf4)
buoylookup <- function(buoyname='B01',baseURL='http://www.neracoos.org/thredds/dodsC/UMO/DSG/SOS')
{
switch(buoyname[1],
'A01'=file.path(baseURL,'A01/CTD20m/HistoricRealtime'),
'B01'=file.path(baseURL,'B01/CTD20m/HistoricRealtime')
)
}
daterange=c('2018-01-01','2018-01-10')
baseurl <- buoylookup(buoyname)
NC <- ncdf4::nc_open(baseurl)
dates <- NC$dim$time$vals*86400 + as.POSIXct('1858-11-17 00:00:00',format='%Y-%m-%d %H:%M:%S',tz='UTC')
daterange <- as.POSIXct(daterange,tz='UTC')
idx <- findInterval(dates,daterange)
len <- sapply(NC$var, '[[','size')
len <- len[len==length(idx)]
idxstart <- which(idx==1)[1]
idxlength <- sum(idx==1)
setwd("V://Catherine//Teaching//MSSM//Jterm2020//mssm-jterm-2020//Day3-DataVisualzationII//")
library("tidyverse")
install.packages("tidyverse")
DATA <- read.csv("SondeData/BLOS_MSSM_jterm_20200113.csv")
summary(DATA)
plot(DATA[['Temp.C']],DATA[['Depth.m']])
plot(DATA[['Temp.C']],-DATA[['Depth.m']])
plot(DATA[['Temperature.C']],-DATA[['Depth.m']],
xlab='Temperature (deg C)',ylab='Depth (m)')
plot(DATA[['Temp.C']],-DATA[['Depth.m']],
xlab='Temperature (deg C)',ylab='Depth (m)')
# change the limits of the axes
plot(DATA[['Temp.C']],-DATA[['Depth.m']],
xlab='Temperature (deg C)',ylab='Depth (m)',
xlim=c(5,6),ylim=c(-10,0))
# change the plot type
plot(DATA[['Temp.C']],-DATA[['Depth.m']],
xlab='Temperature (deg C)',ylab='Depth (m)',
xlim=c(5,6),ylim=c(-10,0),
type="b")
# change the plot type
plot(DATA[['Temp.C']],-DATA[['Depth.m']],
xlab='Temperature (deg C)',ylab='Depth (m)',
xlim=c(5,6),ylim=c(-10,0),
type="l")
# change the plot type
plot(DATA[['Temp.C']],-DATA[['Depth.m']],
xlab='Temperature (deg C)',ylab='Depth (m)',
xlim=c(5,6),ylim=c(-10,0),
type="o")
# change the color
plot(DATA[['Temp.C']],-DATA[['Depth.m']],
xlab='Temperature (deg C)',ylab='Depth (m)',
xlim=c(5,6),ylim=c(-10,0),
type="o",col="turquoise")
png('temperature-20200113.png')
plot(DATA[['Temp.C']],-DATA[['Depth.m']],
xlab='Temperature (deg C)',ylab='Depth (m)',
xlim=c(5,6),ylim=c(-10,0),
type="o",col="turquoise")
dev.off()
ATA <- read.csv("SondeData/BLOS_MSSM_jterm_20200114.csv")
# Let's make a figure and save it
png('temperature-20200114.png')
plot(DATA[['Temp.C']],-DATA[['Depth.m']],
xlab='Temperature (deg C)',ylab='Depth (m)',
xlim=c(5,6),ylim=c(-10,0),
type="o",col="turquoise")
dev.off()
DATA <- read.csv("SondeData/BLOS_MSSM_jterm_20200114.csv")
# Let's make a figure and save it
png('temperature-20200114.png')
plot(DATA[['Temp.C']],-DATA[['Depth.m']],
xlab='Temperature (deg C)',ylab='Depth (m)',
xlim=c(5,6),ylim=c(-10,0),
type="o",col="turquoise")
dev.off()
DATA <- read.csv("SondeData/BLOS_MSSM_jterm_20200115.csv")
# Let's make a figure and save it
png('temperature-20200115.png')
plot(DATA[['Temp.C']],-DATA[['Depth.m']],
xlab='Temperature (deg C)',ylab='Depth (m)',
xlim=c(5,6),ylim=c(-10,0),
type="o",col="turquoise")
dev.off()
DATA <- read.csv("SondeData/BLOS_MSSM_jterm_20200113.csv")
png('temperature-20200113.png')
plot(DATA[['Temp.C']],-DATA[['Depth.m']],
xlab='Temperature (deg C)',ylab='Depth (m)',
xlim=c(5,6),ylim=c(-10,0),
type="o",col="turquoise")
dev.off()
fileNameKeys = c("20200113","20200114","20200115")
for (key in fileNameKeys){
fileName = "SondeData/BLOS_MSSM_jterm_"+key+".csv"
}
fileNameKeys = c("20200113","20200114","20200115")
for (key in fileNameKeys){
fileName = paste("SondeData/BLOS_MSSM_jterm_",key,".csv",sep="")
}
source('~/.active-rstudio-document', echo=TRUE)
source('V:/Catherine/Teaching/MSSM/Jterm2020/mssm-jterm-2020/Day3-DataVisualzationII/readSondeFileAll-forLoop.R', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('V:/Catherine/Teaching/MSSM/Jterm2020/mssm-jterm-2020/Day3-DataVisualzationII/plotAllSondeData.R', echo=TRUE)
source('V:/Catherine/Teaching/MSSM/Jterm2020/mssm-jterm-2020/Day3-DataVisualzationII/plotAllSondeData.R', echo=TRUE)
source('V:/Catherine/Teaching/MSSM/Jterm2020/mssm-jterm-2020/Day3-DataVisualzationII/plotAllSondeData.R', echo=TRUE)
source('V:/Catherine/Teaching/MSSM/Jterm2020/mssm-jterm-2020/Day3-DataVisualzationII/plotAllSondeData.R', echo=TRUE)
source('V:/Catherine/Teaching/MSSM/Jterm2020/mssm-jterm-2020/Day3-DataVisualzationII/plotAllSondeData.R', echo=TRUE)
source('V:/Catherine/Teaching/MSSM/Jterm2020/mssm-jterm-2020/Day3-DataVisualzationII/plotAllSondeData.R', echo=TRUE)
source('V:/Catherine/Teaching/MSSM/Jterm2020/mssm-jterm-2020/Day3-DataVisualzationII/plotAllSondeData.R', echo=TRUE)
source('V:/Catherine/Teaching/MSSM/Jterm2020/mssm-jterm-2020/Day3-DataVisualzationII/plotAllSondeData.R', echo=TRUE)
DATA[['Time..HH.mm.ss.']]
DATA1[['Time..HH.mm.ss.']]
DATA2[['Time..HH.mm.ss.']]
